<?xml version="1.0"?>
<!--
  ~ Simi
  ~
  ~ NOTICE OF LICENSE
  ~
  ~ This source file is subject to the Simicart.com license that is
  ~ available through the world-wide-web at this URL:
  ~ http://www.Simicart.com/license-agreement.html
  ~
  ~ DISCLAIMER
  ~
  ~ Do not edit or add to this file if you wish to upgrade this extension to newer
  ~ version in the future.
  ~
  ~ @category    Simi
  ~ @package     Simi_Simigiftvoucher
  ~ @module     Giftvoucher
  ~ @author      Simi Developer
  ~
  ~ @copyright   Copyright (c) 2016 Simi (http://www.Simicart.com/)
  ~ @license     http://www.Simicart.com/license-agreement.html
  ~
  -->

<config>
    <modules>
        <Simi_Simigiftvoucher>
            <version>0.4.6</version>
        </Simi_Simigiftvoucher>
    </modules>
    <frontend>
        <secure_url>
            <giftvoucher_checkout>/simigiftvoucher/checkout</giftvoucher_checkout>
        </secure_url>
        <routers>
            <simigiftvoucher>
                <use>standard</use>
                <args>
                    <module>Simi_Simigiftvoucher</module>
                    <frontName>simigiftvoucher</frontName>
                </args>
            </simigiftvoucher>
        </routers>
        <layout>
            <updates>
                <simigiftvoucher>
                    <file>simigiftvoucher.xml</file>
                </simigiftvoucher>
            </updates>
        </layout>
        <translate>
            <modules>
                <Simi_Simigiftvoucher>
                    <files>
                        <default>Simi_Simigiftvoucher.csv</default>
                    </files>
                </Simi_Simigiftvoucher>
            </modules>
        </translate>
        <events>
            <controller_action_predispatch_checkout_cart_index>
                <observers>
                    <simicheckout_cart_index_action>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>cartIndexAction</method>
                    </simicheckout_cart_index_action>
                </observers>
            </controller_action_predispatch_checkout_cart_index>
            <controller_action_predispatch_checkout_cart_couponPost>
                <observers>
                    <simicheckout_cart_couponPost_action>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>couponPostAction</method>
                    </simicheckout_cart_couponPost_action>
                </observers>
            </controller_action_predispatch_checkout_cart_couponPost>
            <controller_action_predispatch_onestepcheckout_index_add_coupon>
                <observers>
                    <simionestepcheckout_index_addCoupon_action>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>addCouponAction</method>
                    </simionestepcheckout_index_addCoupon_action>
                </observers>
            </controller_action_predispatch_onestepcheckout_index_add_coupon>
            <sales_quote_collect_totals_after>
                <observers>
                    <simiquote_collect_totals_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>collectTotalsAfter</method>
                    </simiquote_collect_totals_after>
                </observers>
            </sales_quote_collect_totals_after>
            <controller_action_predispatch_checkout_onepage_index>
                <observers>
                    <simicheckout_cart_couponPost_action>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>predispatchCheckout</method>
                    </simicheckout_cart_couponPost_action>
                </observers>
            </controller_action_predispatch_checkout_onepage_index>
            <controller_action_predispatch_checkout_multishipping_addresses>
                <observers>
                    <simicheckout_cart_couponPost_action>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>predispatchCheckout</method>
                    </simicheckout_cart_couponPost_action>
                </observers>
            </controller_action_predispatch_checkout_multishipping_addresses>
            <controller_action_predispatch_onestepcheckout_index_index>
                <observers>
                    <simicheckout_cart_couponPost_action>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>predispatchCheckout</method>
                    </simicheckout_cart_couponPost_action>
                </observers>
            </controller_action_predispatch_onestepcheckout_index_index>
            <controller_action_layout_generate_blocks_after>
                <observers>
                    <simicheckout_action_layout_generate_blocks_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>controllerActionLayoutGenerateBlocksAfter</method>
                    </simicheckout_action_layout_generate_blocks_after>
                </observers>
            </controller_action_layout_generate_blocks_after>
            <sales_order_place_before>
                <observers>
                    <simigiftvoucher_order_place_before>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>orderPlaceBefore</method>
                    </simigiftvoucher_order_place_before>
                </observers>
            </sales_order_place_before>
            <sales_order_place_after>
                <observers>
                    <simigiftvoucher_order_place_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>orderPlaceAfter</method>
                    </simigiftvoucher_order_place_after>
                </observers>
            </sales_order_place_after>
            <paypal_prepare_line_items>
                <observers>
                    <simigiftvoucher_paypal_prepare_line_items>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>paypalPrepareItems</method>
                    </simigiftvoucher_paypal_prepare_line_items>
                </observers>
            </paypal_prepare_line_items>
            <core_block_abstract_to_html_after>
                <observers>
                    <simigiftvoucher_block_to_html>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>giftcardPaymentMethod</method>
                    </simigiftvoucher_block_to_html>
                </observers>
            </core_block_abstract_to_html_after>
            <core_block_abstract_to_html_before>
                <observers>
                    <simigiftvoucher_block_to_html_before>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>showLinks</method>
                    </simigiftvoucher_block_to_html_before>
                </observers>
            </core_block_abstract_to_html_before>
            <core_block_abstract_prepare_layout_before>
                <observers>
                    <simi_giftcard_add_jquery_before_prototype>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>prepareLayoutBefore</method>
                    </simi_giftcard_add_jquery_before_prototype>
                </observers>
            </core_block_abstract_prepare_layout_before>
        </events>
        <product>
            <collection>
                <attributes>
                    <simigift_price/>
                </attributes>
            </collection>
        </product>
    </frontend>
    <admin>
        <routers>
            <adminhtml>
                <args>
                    <modules>
                        <Simi_Simigiftvoucher after="Mage_Adminhtml">Simi_Simigiftvoucher_Adminhtml</Simi_Simigiftvoucher>
                    </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
    <adminhtml>
        <layout>
            <updates>
                <simigiftvoucher>
                    <file>simigiftvoucher.xml</file>
                </simigiftvoucher>
            </updates>
        </layout>
        <translate>
            <modules>
                <Simi_Simigiftvoucher>
                    <files>
                        <default>Simi_Simigiftvoucher.csv</default>
                    </files>
                </Simi_Simigiftvoucher>
            </modules>
        </translate>
        <sales>
            <order>
                <create>
                    <available_product_types>
                        <simigiftvoucher/>
                    </available_product_types>
                </create>
            </order>
        </sales>
        <events>
            <catalog_product_new_action>
                <observers>
                    <simigiftvoucher_postdispatch_adminhtml_catalog_product_save>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>adminhtmlCatalogProductNewAfter</method>
                    </simigiftvoucher_postdispatch_adminhtml_catalog_product_save>
                </observers>
            </catalog_product_new_action>
            <controller_action_postdispatch_adminhtml_catalog_product_save>
                <observers>
                    <simigiftvoucher_postdispatch_adminhtml_catalog_product_save>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>adminhtmlCatalogProductSaveAfter</method>
                    </simigiftvoucher_postdispatch_adminhtml_catalog_product_save>
                </observers>
            </controller_action_postdispatch_adminhtml_catalog_product_save>
            <sales_model_service_quote_submit_after>
                <observers>
                    <simigiftvoucher_order_place_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>orderPlaceAfter</method>
                    </simigiftvoucher_order_place_after>
                </observers>
            </sales_model_service_quote_submit_after>
            <controller_action_predispatch_adminhtml_sales_order_create_start>
                <observers>
                    <simigiftvoucher_clear_session>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>clearAdminCheckoutSession</method>
                    </simigiftvoucher_clear_session>
                </observers>
            </controller_action_predispatch_adminhtml_sales_order_create_start>
            <controller_action_predispatch_adminhtml_sales_order_create_cancel>
                <observers>
                    <simigiftvoucher_clear_session>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>clearAdminCheckoutSession</method>
                    </simigiftvoucher_clear_session>
                </observers>
            </controller_action_predispatch_adminhtml_sales_order_create_cancel>
            <controller_action_predispatch_adminhtml_sales_order_create_loadBlock>
                <observers>
                    <simigiftvoucher_coupon_apply>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>applyWithCoupon</method>
                    </simigiftvoucher_coupon_apply>
                </observers>
            </controller_action_predispatch_adminhtml_sales_order_create_loadBlock>
            <sales_shipment_item_save_after>
                <observers>
                    <simigiftvoucher_shipment_item_save_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>updateShippedGiftCard</method>
                    </simigiftvoucher_shipment_item_save_after>
                </observers>
            </sales_shipment_item_save_after>
            <adminhtml_customer_save_after>
                <observers>
                    <simigiftcard_save_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>customerSaveAfter</method>
                    </simigiftcard_save_after>
                </observers>
            </adminhtml_customer_save_after>
            <adminhtml_sales_order_creditmemo_register_before>
                <observers>
                    <simigiftcard_creditmemo_register_before>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>creditmemoRegisterBefore</method>
                    </simigiftcard_creditmemo_register_before>
                </observers>
            </adminhtml_sales_order_creditmemo_register_before>
            <!-- Gift Card Product Conditions -->
            <controller_action_layout_render_before_adminhtml_catalog_product_new>
                <observers>
                    <simigiftcard_conditions>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>conditionsAction</method>
                    </simigiftcard_conditions>
                </observers>
            </controller_action_layout_render_before_adminhtml_catalog_product_new>
            <controller_action_layout_render_before_adminhtml_catalog_product_edit>
                <observers>
                    <simigiftcard_conditions>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>conditionsAction</method>
                    </simigiftcard_conditions>
                </observers>
            </controller_action_layout_render_before_adminhtml_catalog_product_edit>
            <catalog_product_save_after>
                <observers>
                    <simigiftcard_conditions>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>productSaveAfter</method>
                    </simigiftcard_conditions>
                </observers>
            </catalog_product_save_after>

        </events>
    </adminhtml>
    <global>
        <models>
            <simigiftvoucher>
                <class>Simi_Simigiftvoucher_Model</class>
                <resourceModel>simigiftvoucher_mysql4</resourceModel>
            </simigiftvoucher>
            <simigiftvoucher_mysql4>
                <class>Simi_Simigiftvoucher_Model_Mysql4</class>
                <entities>
                    <giftvoucher>
                        <table>simigiftvoucher</table>
                    </giftvoucher>
                    <history>
                        <table>simigiftvoucher_history</table>
                    </history>
                    <credit>
                        <table>simigiftvoucher_credit</table>
                    </credit>
                    <credithistory>
                        <table>simigiftvoucher_credit_history</table>
                    </credithistory>
                    <customervoucher>
                        <table>simigiftvoucher_customer_voucher</table>
                    </customervoucher>
                    <template>
                        <table>simigiftvoucher_template</table>
                    </template>
                    <gifttemplate>
                        <table>simigiftcard_template</table>
                    </gifttemplate>
                    <product>
                        <table>simigiftvoucher_product</table>
                    </product>
                    <giftcodeset>
                        <table>simigiftvoucher_giftcodeset</table>
                    </giftcodeset>
                </entities>
            </simigiftvoucher_mysql4>
        </models>
        <resources>
            <simigiftvoucher_setup>
                <setup>
                    <module>Simi_Simigiftvoucher</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </simigiftvoucher_setup>
            <giftvoucher_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </giftvoucher_write>
            <giftvoucher_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </giftvoucher_read>
        </resources>
        <blocks>
            <simigiftvoucher>
                <class>Simi_Simigiftvoucher_Block</class>
            </simigiftvoucher>
            <adminhtml>
                <rewrite>
                    <catalog_product_edit_tab_inventory>Simi_Simigiftvoucher_Block_Adminhtml_Inventory</catalog_product_edit_tab_inventory>
                    <sales_order_create_items_grid>Simi_Simigiftvoucher_Block_Adminhtml_Sales_Order_Create_Items_Grid</sales_order_create_items_grid>
                </rewrite>
            </adminhtml>
        </blocks>
        <helpers>
            <simigiftvoucher>
                <class>Simi_Simigiftvoucher_Helper</class>
            </simigiftvoucher>
        </helpers>
        <sales>
            <quote>
                <totals>
                    <simigiftcardcredit>
                        <class>simigiftvoucher/total_quote_giftcardcredit</class>
                        <after>wee,discount</after>
                        <before>simigiftvoucher,tax</before>
                    </simigiftcardcredit>
                    <simigiftvoucher>
                        <class>simigiftvoucher/total_quote_giftvoucher</class>
                        <renderer>simigiftvoucher/cart_total</renderer>
                        <after>wee,discount</after>
                        <before>tax</before>
                    </simigiftvoucher>
                    <simigiftcardcredit_after_tax>
                        <class>simigiftvoucher/total_quote_giftcardcreditaftertax</class>
                        <after>tax</after>
                        <before>simigiftvoucher_after_tax,grand_total</before>
                    </simigiftcardcredit_after_tax>
                    <simigiftvoucher_after_tax>
                        <class>simigiftvoucher/total_quote_giftvoucheraftertax</class>
                        <renderer>simigiftvoucher/cart_total</renderer>
                        <after>tax</after>
                        <before>grand_total</before>
                    </simigiftvoucher_after_tax>
                </totals>
            </quote>
            <order_invoice>
                <totals>
                    <simigiftvoucher>
                        <class>simigiftvoucher/total_order_invoice_giftvoucher</class>
                        <after>grand_total</after>
                        <!-- <before>tax</before> -->
                    </simigiftvoucher>
                    <!-- <simigiftcardcredit>
                        <class>simigiftvoucher/total_order_invoice_giftcardcredit</class>
                    </simigiftcardcredit> -->
                </totals>
            </order_invoice>
            <order_creditmemo>
                <totals>
                    <simigiftvoucher>
                        <class>simigiftvoucher/total_order_creditmemo_giftvoucher</class>
                        <after>grand_total</after>
                        <!-- <before>tax</before> -->
                    </simigiftvoucher>
                    <!-- <simigiftcardcredit>
                        <class>simigiftvoucher/total_order_creditmemo_giftcardcredit</class>
                    </simigiftcardcredit> -->
                </totals>
            </order_creditmemo>
        </sales>
        <pdf>
            <invoice>
                <simigiftvoucher>simigiftvoucher/pdf_invoice_item</simigiftvoucher>
            </invoice>
            <shipment>
                <simigiftvoucher>simigiftvoucher/pdf_shipment_item</simigiftvoucher>
            </shipment>
            <creditmemo>
                <simigiftvoucher>simigiftvoucher/pdf_creditmemo_item</simigiftvoucher>
            </creditmemo>
            <totals>
                <simigiftvoucher translate="title">
                    <title>Gift Card</title>
                    <source_field>simigift_voucher_discount</source_field>
                    <model>simigiftvoucher/total_pdf_giftvoucher</model>
                    <font_size>7</font_size>
                    <display_zero>0</display_zero>
                    <sort_order>512</sort_order>
                </simigiftvoucher>
                <simigiftcardcredit translate="title">
                    <title>Customer Credit</title>
                    <source_field>simiuse_gift_credit_amount</source_field>
                    <model>simigiftvoucher/total_pdf_giftcardcredit</model>
                    <font_size>7</font_size>
                    <display_zero>0</display_zero>
                    <sort_order>511</sort_order>
                </simigiftcardcredit>
            </totals>
        </pdf>
        <fieldsets>
            <sales_convert_quote_item>
                <simigiftcard_credit_amount>
                    <to_order_item>*</to_order_item>
                </simigiftcard_credit_amount>
                <simibase_use_gift_credit_amount>
                    <to_order_item>*</to_order_item>
                </simibase_use_gift_credit_amount>
                <simiuse_gift_credit_amount>
                    <to_order_item>*</to_order_item>
                </simiuse_gift_credit_amount>
                <simibase_gift_voucher_discount>
                    <to_order_item>*</to_order_item>
                </simibase_gift_voucher_discount>
                <simigift_voucher_discount>
                    <to_order_item>*</to_order_item>
                </simigift_voucher_discount>
                <simigiftvoucher_base_hidden_tax_amount>
                    <to_order_item>*</to_order_item>
                </simigiftvoucher_base_hidden_tax_amount>
                <simigiftvoucher_hidden_tax_amount>
                    <to_order_item>*</to_order_item>
                </simigiftvoucher_hidden_tax_amount>
                <simigiftcredit_hidden_tax_amount>
                    <to_order_item>*</to_order_item>
                </simigiftcredit_hidden_tax_amount>
                <simigiftcredit_base_hidden_tax_amount>
                    <to_order_item>*</to_order_item>
                </simigiftcredit_base_hidden_tax_amount>
            </sales_convert_quote_item>
            <sales_convert_quote_address>
                <simibase_giftvoucher_discount_for_shipping>
                    <to_order>*</to_order>
                </simibase_giftvoucher_discount_for_shipping>
                <simigiftvoucher_discount_for_shipping>
                    <to_order>*</to_order>
                </simigiftvoucher_discount_for_shipping>
                <simibase_giftcredit_discount_for_shipping>
                    <to_order>*</to_order>
                </simibase_giftcredit_discount_for_shipping>
                <simigiftcredit_discount_for_shipping>
                    <to_order>*</to_order>
                </simigiftcredit_discount_for_shipping>
                <simibase_gift_voucher_discount>
                    <to_order>*</to_order>
                </simibase_gift_voucher_discount>
                <simigift_voucher_discount>
                    <to_order>*</to_order>
                </simigift_voucher_discount>
                <simigift_codes>
                    <to_order>*</to_order>
                </simigift_codes>
                <simicodes_base_discount>
                    <to_order>*</to_order>
                </simicodes_base_discount>
                <simicodes_discount>
                    <to_order>*</to_order>
                </simicodes_discount>
                <simigiftcard_credit_amount>
                    <to_order>*</to_order>
                </simigiftcard_credit_amount>
                <simibase_use_gift_credit_amount>
                    <to_order>*</to_order>
                </simibase_use_gift_credit_amount>
                <simiuse_gift_credit_amount>
                    <to_order>*</to_order>
                </simiuse_gift_credit_amount>
                <simigiftvoucher_base_shipping_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftvoucher_base_shipping_hidden_tax_amount>
                <simigiftvoucher_shipping_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftvoucher_shipping_hidden_tax_amount>
                <simigiftcredit_base_shipping_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftcredit_base_shipping_hidden_tax_amount>
                <simigiftcredit_shipping_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftcredit_shipping_hidden_tax_amount>
                <simigiftvoucher_base_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftvoucher_base_hidden_tax_amount>
                <simigiftvoucher_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftvoucher_hidden_tax_amount>
                <simigiftcredit_base_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftcredit_base_hidden_tax_amount>
                <simigiftcredit_hidden_tax_amount>
                    <to_order>*</to_order>
                </simigiftcredit_hidden_tax_amount>
            </sales_convert_quote_address>
        </fieldsets>
        <events>
            <!-- Add Api Resrouce -->
            <simi_simiconnector_model_server_initialize>
                <observers>
                    <simi_simiconnector_model_server_initialize_simigiftvoucher>
                        <type>singleton</type>
                        <class>simigiftvoucher/simiobserver</class>
                        <method>simiSimiconnectorModelServerInitialize</method>
                    </simi_simiconnector_model_server_initialize_simigiftvoucher>
                </observers>
            </simi_simiconnector_model_server_initialize>

            <!-- Quote Items (Cart) -->
            <simi_simiconnector_model_api_quoteitems_index_after>
                <observers>
                    <simi_simigiftvoucher_model_api_quoteitems_index_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/simiobserver</class>
                        <method>simiSimiconnectorModelApiQuoteitemsIndexAfter</method>
                    </simi_simigiftvoucher_model_api_quoteitems_index_after>
                </observers>
            </simi_simiconnector_model_api_quoteitems_index_after>
            <!-- Order (Onepage) Detail -->
            <simi_simiconnector_model_api_orders_onepage_show_after>
                <observers>
                    <simi_simigiftvoucher_model_api_orders_onepage_show_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/simiobserver</class>
                        <method>simiSimiconnectorModelApiOrdersOnepageShowAfter</method>
                    </simi_simigiftvoucher_model_api_orders_onepage_show_after>
                </observers>
            </simi_simiconnector_model_api_orders_onepage_show_after>

            <checkout_cart_product_add_after>
                <observers>
                    <simigiftvoucher_collect_totals_before>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>productAddAfter</method>
                    </simigiftvoucher_collect_totals_before>
                </observers>
            </checkout_cart_product_add_after>
            <paypal_prepare_line_items>
                <observers>
                    <simigiftvoucher_paypal_prepare_line_items>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>paypalPrepareItems</method>
                    </simigiftvoucher_paypal_prepare_line_items>
                </observers>
            </paypal_prepare_line_items>
            <sales_quote_collect_totals_before>
                <observers>
                    <simigiftvoucher_collect_totals_before>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>collectTotalsBefore</method>
                    </simigiftvoucher_collect_totals_before>
                </observers>
            </sales_quote_collect_totals_before>
            <sales_order_load_after>
                <observers>
                    <simigiftvoucher_order_load_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>orderLoadAfter</method>
                    </simigiftvoucher_order_load_after>
                </observers>
            </sales_order_load_after>
            <sales_order_save_after>
                <observers>
                    <simigiftvoucher_order_save_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>orderSaveAfter</method>
                    </simigiftvoucher_order_save_after>
                </observers>
            </sales_order_save_after>
            <sales_order_creditmemo_save_after>
                <observers>
                    <simigiftvoucher_creditmemo_save_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>creditmemoSaveAfter</method>
                    </simigiftvoucher_creditmemo_save_after>
                </observers>
            </sales_order_creditmemo_save_after>
            <sales_order_invoice_save_after>
                <observers>
                    <simigiftvoucher_invoice_save_after>
                        <type>singleton</type>
                        <class>simigiftvoucher/observer</class>
                        <method>invoiceSaveAfter</method>
                    </simigiftvoucher_invoice_save_after>
                </observers>
            </sales_order_invoice_save_after>
        </events>
        <catalog>
            <product>
                <type>
                    <simigiftvoucher translate="label" module="simigiftvoucher">
                        <label>Gift Card</label>
                        <model>simigiftvoucher/product_type</model>
                        <price_model>simigiftvoucher/product_price</price_model>
                        <index_data_retreiver>catalogindex/data_simple</index_data_retreiver>
                        <is_qty>1</is_qty>
                        <price_indexer>simigiftvoucher/indexer_price</price_indexer>
                    </simigiftvoucher>
                </type>
            </product>
        </catalog>
        <template>
            <email>
                <simigiftvoucher_email_self>
                    <label>Send to purchaser</label>
                    <file>simigiftvoucher/self_amazon.html</file>
                    <type>html</type>
                </simigiftvoucher_email_self>
                <simigiftvoucher_email_self_amazon>
                    <label>Send to purchaser</label>
                    <file>simigiftvoucher/self_amazon.html</file>
                    <type>html</type>
                </simigiftvoucher_email_self_amazon>
                <simigiftvoucher_email_template>
                    <label>Send Gift Card to friend</label>
                    <file>simigiftvoucher/amazon.html</file>
                    <type>html</type>
                </simigiftvoucher_email_template>
                <simigiftvoucher_email_template_amazon>
                    <label>Send Gift Card to friend</label>
                    <file>simigiftvoucher/amazon.html</file>
                    <type>html</type>
                </simigiftvoucher_email_template_amazon>
                <simigiftvoucher_email_template_refund>
                    <label>Send message refund Gift Card to friend</label>
                    <file>simigiftvoucher/gift_refund.html</file>
                    <type>html</type>
                </simigiftvoucher_email_template_refund>
                <simigiftvoucher_email_template_success>
                    <label>Send message to sender when Gift Card is sent to friend</label>
                    <file>simigiftvoucher/self_success.html</file>
                    <type>html</type>
                </simigiftvoucher_email_template_success>
            </email>
        </template>
    </global>
    <default>
        <simigiftvoucher>
            <general>
                <active>1</active>
                <pattern><![CDATA[[N.4]-[AN.5]-[A.4]]]></pattern>
                <showprefix>4</showprefix>
                <hiddenchar>X</hiddenchar>
                <status>1</status>
                <expire_orderstatus>canceled,closed</expire_orderstatus>
                <expire>365</expire>
                <enablecredit>1</enablecredit>
                <enablecredit>1</enablecredit>
                <credit_condition>1</credit_condition>
                <online_refund>1</online_refund>
                <refund_orderstatus>canceled,closed</refund_orderstatus>
                <auto_shipping>0</auto_shipping>
                <maximum>5</maximum>
                <use_for_ship>0</use_for_ship>
                <use_with_coupon>1</use_with_coupon>
                <show_expiry_date>1</show_expiry_date>
                <apply_after_tax>1</apply_after_tax>
                <gc_show_check_link>0</gc_show_check_link>
            </general>
            <interface>
                <amount>25,75,100</amount>
                <description>The value of Gift card</description>
                <postoffice>1</postoffice>
                <custom_image>1</custom_image>
                <upload_max_size>500</upload_max_size>
                <postoffice_date>0</postoffice_date>
                <max>220</max>
                <schedule>1</schedule>
            </interface>
            <interface_checkout>
                <display_image_item>1</display_image_item>
                <show_gift_card>1</show_gift_card>
                <display>amount,giftcard_template_id,recipient_name,recipient_email,recipient_ship,recipient_address,message,day_to_send</display>
            </interface_checkout>
            <interface_payment>
                <show_gift_card>1</show_gift_card>
            </interface_payment>
            <email>
                <enable>1</enable>
                <sender>general</sender>
                <note><![CDATA[Please note that: Converting to cash is not allowed. You can use the Gift card code or redeem it to credit balance to pay for your order at <a href="{store_url}" title="{store_name}">{store_url}</a>.]]></note>
                <attachment>0</attachment>
                <self>simigiftvoucher_email_self</self>
                <only_complete>2,4,5</only_complete>
                <send_with_ship>1</send_with_ship>
                <send_refund>1</send_refund>
                <template>simigiftvoucher_email_template</template>
                <template_refund>simigiftvoucher_email_template_refund</template_refund>
                <template_success>simigiftvoucher_email_template_success</template_success>
                <autosend>1</autosend>
                <daybefore>7</daybefore>
            </email>
            <print_voucher>
                <barcode_enable>1</barcode_enable>
                <barcode_type>code128</barcode_type>
                <logo>default/logo_print.png</logo>
                <note><![CDATA[Converting to cash is not allowed. You can use the gift card code or redeem it to pay for your order at {store_url}.]]></note>
                <fold_paper_notes><![CDATA[<h3 class="title-card">Redeeming your Gift Card</h3>
                    <ul class="list-rules">
                        <li>Visit {store_url} </li>
                        <li>Login to  <b>Your Account</b>. After that, enter the Gift Card and Redeem.</li>
                     </ul>
                    <p class="content-rules">Gift card funds can be applied to eligible orders during the checkout process. Your
                        Claim Code may also be entered during checkout. To redeem your gift card, firstly add
                        the gift card funds to Your Account.</p>]]></fold_paper_notes>
            </print_voucher>
        </simigiftvoucher>
        <sales>
            <totals_sort>
                <simigiftcardcredit>34</simigiftcardcredit>
                <simigiftvoucher>35</simigiftvoucher>
                <simigiftcardcredit_after_tax>60</simigiftcardcredit_after_tax>
                <simigiftvoucher_after_tax>70</simigiftvoucher_after_tax>
            </totals_sort>
        </sales>
        <payment>
            <simigiftvoucher>
                <active>1</active>
                <model>simigiftvoucher/payment_giftvoucher</model>
                <title>Gift Card</title>
                <order_status>pending</order_status>
                <invoice>1</invoice>
                <description><![CDATA[Use your Gift card(s) to pay for this order]]></description>
                <allowspecific>0</allowspecific>
                <sort_order>0</sort_order>
            </simigiftvoucher>
        </payment>
    </default>
    <crontab>
        <jobs>
            <simigiftvoucher>
                <schedule>
                    <cron_expr>0 0 * * *</cron_expr>
                </schedule>
                <run>
                    <model>simigiftvoucher/observer::autoSendMail</model>
                </run>
            </simigiftvoucher>
            <giftvoucherschedule>
                <schedule>
                    <cron_expr>15 */2 * * *</cron_expr>
                </schedule>
                <run>
                    <model>simigiftvoucher/observer::sendScheduleEmail</model>
                </run>
            </giftvoucherschedule>
            <giftvoucherautodeleteimage>
                <schedule>
                    <cron_expr>30 0 * * *</cron_expr>
                </schedule>
                <run>
                    <model>simigiftvoucher/observer::autoDeleteImage</model>
                </run>
            </giftvoucherautodeleteimage>
            <giftvoucherautodeleteimage1>
                <schedule>
                    <cron_expr>45 0 1 * *</cron_expr>
                </schedule>
                <run>
                    <model>simigiftvoucher/observer::autoDeleteImage1</model>
                </run>
            </giftvoucherautodeleteimage1>
        </jobs>
    </crontab>
</config>
